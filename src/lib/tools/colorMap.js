/*
 * @Author: wuyifan0203 1208097313@qq.com
 * @Date: 2023-11-21 16:26:11
 * @LastEditors: wuyifan0203 1208097313@qq.com
 * @LastEditTime: 2024-07-24 16:36:17
 * @FilePath: /threejs-demo/src/lib/tools/colorMap.js
 * Copyright (c) 2024 by wuyifan email: 1208097313@qq.com, All Rights Reserved.
 */

const colorMap = [
  [0, 0, 131.484375],
  [0, 0, 135.46875],
  [0, 0, 139.453125],
  [0, 0, 143.4375],
  [0, 0, 147.421875],
  [0, 0, 151.40625],
  [0, 0, 155.390625],
  [0, 0, 159.375],
  [0, 0, 163.359375],
  [0, 0, 167.34375],
  [0, 0, 171.328125],
  [0, 0, 175.3125],
  [0, 0, 179.296875],
  [0, 0, 183.28125],
  [0, 0, 187.265625],
  [0, 0, 191.25],
  [0, 0, 195.234375],
  [0, 0, 199.21875],
  [0, 0, 203.203125],
  [0, 0, 207.1875],
  [0, 0, 211.171875],
  [0, 0, 215.15625],
  [0, 0, 219.140625],
  [0, 0, 223.125],
  [0, 0, 227.109375],
  [0, 0, 231.09375],
  [0, 0, 235.078125],
  [0, 0, 239.0625],
  [0, 0, 243.046875],
  [0, 0, 247.03125],
  [0, 0, 251.015625],
  [0, 0, 255],
  [0, 3.984375, 255],
  [0, 7.96875, 255],
  [0, 11.953125, 255],
  [0, 15.9375, 255],
  [0, 19.921875, 255],
  [0, 23.90625, 255],
  [0, 27.890625, 255],
  [0, 31.875, 255],
  [0, 35.859375, 255],
  [0, 39.84375, 255],
  [0, 43.828125, 255],
  [0, 47.8125, 255],
  [0, 51.796875, 255],
  [0, 55.78125, 255],
  [0, 59.765625, 255],
  [0, 63.75, 255],
  [0, 67.734375, 255],
  [0, 71.71875, 255],
  [0, 75.703125, 255],
  [0, 79.6875, 255],
  [0, 83.671875, 255],
  [0, 87.65625, 255],
  [0, 91.640625, 255],
  [0, 95.625, 255],
  [0, 99.609375, 255],
  [0, 103.59375, 255],
  [0, 107.578125, 255],
  [0, 111.5625, 255],
  [0, 115.546875, 255],
  [0, 119.53125, 255],
  [0, 123.515625, 255],
  [0, 127.5, 255],
  [0, 131.484375, 255],
  [0, 135.46875, 255],
  [0, 139.453125, 255],
  [0, 143.4375, 255],
  [0, 147.421875, 255],
  [0, 151.40625, 255],
  [0, 155.390625, 255],
  [0, 159.375, 255],
  [0, 163.359375, 255],
  [0, 167.34375, 255],
  [0, 171.328125, 255],
  [0, 175.3125, 255],
  [0, 179.296875, 255],
  [0, 183.28125, 255],
  [0, 187.265625, 255],
  [0, 191.25, 255],
  [0, 195.234375, 255],
  [0, 199.21875, 255],
  [0, 203.203125, 255],
  [0, 207.1875, 255],
  [0, 211.171875, 255],
  [0, 215.15625, 255],
  [0, 219.140625, 255],
  [0, 223.125, 255],
  [0, 227.109375, 255],
  [0, 231.09375, 255],
  [0, 235.078125, 255],
  [0, 239.0625, 255],
  [0, 243.046875, 255],
  [0, 247.03125, 255],
  [0, 251.015625, 255],
  [0, 255, 255],
  [3.984375, 255, 251.015625],
  [7.96875, 255, 247.03125],
  [11.953125, 255, 243.046875],
  [15.9375, 255, 239.0625],
  [19.921875, 255, 235.078125],
  [23.90625, 255, 231.09375],
  [27.890625, 255, 227.109375],
  [31.875, 255, 223.125],
  [35.859375, 255, 219.140625],
  [39.84375, 255, 215.15625],
  [43.828125, 255, 211.171875],
  [47.8125, 255, 207.1875],
  [51.796875, 255, 203.203125],
  [55.78125, 255, 199.21875],
  [59.765625, 255, 195.234375],
  [63.75, 255, 191.25],
  [67.734375, 255, 187.265625],
  [71.71875, 255, 183.28125],
  [75.703125, 255, 179.296875],
  [79.6875, 255, 175.3125],
  [83.671875, 255, 171.328125],
  [87.65625, 255, 167.34375],
  [91.640625, 255, 163.359375],
  [95.625, 255, 159.375],
  [99.609375, 255, 155.390625],
  [103.59375, 255, 151.40625],
  [107.578125, 255, 147.421875],
  [111.5625, 255, 143.4375],
  [115.546875, 255, 139.453125],
  [119.53125, 255, 135.46875],
  [123.515625, 255, 131.484375],
  [127.5, 255, 127.5],
  [131.484375, 255, 123.515625],
  [135.46875, 255, 119.53125],
  [139.453125, 255, 115.546875],
  [143.4375, 255, 111.5625],
  [147.421875, 255, 107.578125],
  [151.40625, 255, 103.59375],
  [155.390625, 255, 99.609375],
  [159.375, 255, 95.625],
  [163.359375, 255, 91.640625],
  [167.34375, 255, 87.65625],
  [171.328125, 255, 83.671875],
  [175.3125, 255, 79.6875],
  [179.296875, 255, 75.703125],
  [183.28125, 255, 71.71875],
  [187.265625, 255, 67.734375],
  [191.25, 255, 63.75],
  [195.234375, 255, 59.765625],
  [199.21875, 255, 55.78125],
  [203.203125, 255, 51.796875],
  [207.1875, 255, 47.8125],
  [211.171875, 255, 43.828125],
  [215.15625, 255, 39.84375],
  [219.140625, 255, 35.859375],
  [223.125, 255, 31.875],
  [227.109375, 255, 27.890625],
  [231.09375, 255, 23.90625],
  [235.078125, 255, 19.921875],
  [239.0625, 255, 15.9375],
  [243.046875, 255, 11.953125],
  [247.03125, 255, 7.96875],
  [251.015625, 255, 3.984375],
  [255, 255, 0],
  [255, 251.015625, 0],
  [255, 247.03125, 0],
  [255, 243.046875, 0],
  [255, 239.0625, 0],
  [255, 235.078125, 0],
  [255, 231.09375, 0],
  [255, 227.109375, 0],
  [255, 223.125, 0],
  [255, 219.140625, 0],
  [255, 215.15625, 0],
  [255, 211.171875, 0],
  [255, 207.1875, 0],
  [255, 203.203125, 0],
  [255, 199.21875, 0],
  [255, 195.234375, 0],
  [255, 191.25, 0],
  [255, 187.265625, 0],
  [255, 183.28125, 0],
  [255, 179.296875, 0],
  [255, 175.3125, 0],
  [255, 171.328125, 0],
  [255, 167.34375, 0],
  [255, 163.359375, 0],
  [255, 159.375, 0],
  [255, 155.390625, 0],
  [255, 151.40625, 0],
  [255, 147.421875, 0],
  [255, 143.4375, 0],
  [255, 139.453125, 0],
  [255, 135.46875, 0],
  [255, 131.484375, 0],
  [255, 127.5, 0],
  [255, 123.515625, 0],
  [255, 119.53125, 0],
  [255, 115.546875, 0],
  [255, 111.5625, 0],
  [255, 107.578125, 0],
  [255, 103.59375, 0],
  [255, 99.609375, 0],
  [255, 95.625, 0],
  [255, 91.640625, 0],
  [255, 87.65625, 0],
  [255, 83.671875, 0],
  [255, 79.6875, 0],
  [255, 75.703125, 0],
  [255, 71.71875, 0],
  [255, 67.734375, 0],
  [255, 63.75, 0],
  [255, 59.765625, 0],
  [255, 55.78125, 0],
  [255, 51.796875, 0],
  [255, 47.8125, 0],
  [255, 43.828125, 0],
  [255, 39.84375, 0],
  [255, 35.859375, 0],
  [255, 31.875, 0],
  [255, 27.890625, 0],
  [255, 23.90625, 0],
  [255, 19.921875, 0],
  [255, 15.9375, 0],
  [255, 11.953125, 0],
  [255, 7.96875, 0],
  [255, 3.984375, 0],
  [255, 0, 0],
  [251.015625, 0, 0],
  [247.03125, 0, 0],
  [243.046875, 0, 0],
  [239.0625, 0, 0],
  [235.078125, 0, 0],
  [231.09375, 0, 0],
  [227.109375, 0, 0],
  [223.125, 0, 0],
  [219.140625, 0, 0],
  [215.15625, 0, 0],
  [211.171875, 0, 0],
  [207.1875, 0, 0],
  [203.203125, 0, 0],
  [199.21875, 0, 0],
  [195.234375, 0, 0],
  [191.25, 0, 0],
  [187.265625, 0, 0],
  [183.28125, 0, 0],
  [179.296875, 0, 0],
  [175.3125, 0, 0],
  [171.328125, 0, 0],
  [167.34375, 0, 0],
  [163.359375, 0, 0],
  [159.375, 0, 0],
  [155.390625, 0, 0],
  [151.40625, 0, 0],
  [147.421875, 0, 0],
  [143.4375, 0, 0],
  [139.453125, 0, 0],
  [135.46875, 0, 0],
  [131.484375, 0, 0],
  [127.5, 0, 0]
];

const rainbowColors = [
  "#FF0000", // 红色
  "#FF7F00", // 橙色
  "#FFFF00", // 黄色
  "#00FF00", // 绿色
  "#00FFFF", // 青色
  "#0000FF", // 蓝色
  "#8B00FF"  // 紫色
];

const getColor = (index) => {
  let color = colorMap[index % 256];
  const r = parseInt(color[0]).toString(16);
  const g = parseInt(color[1]).toString(16);
  const b = parseInt(color[2]).toString(16);
  return '#' + (r.length !== 1 ? r : '0' + r) + (g.length !== 1 ? g : '0' + g) + (b.length !== 1 ? b : '0' + b);
};

function getRainbowColor(index) {
  return rainbowColors[index % 7];
}

const colors = [
  [0, 32, g => [0, 0, 128 + 4 * g]],
  [32, 33, g => [0, 0, 255]],
  [33, 96, g => [0, 4 + 4 * (g - 32), 255]],
  [96, 97, g => [0, 255, 255]],
  [97, 159, g => [6 + 4 * (g - 96), 255, 250 - 4 * (g - 96)]],
  [159, 160, g => [254, 255, 1]],
  [160, 224, g => [255, 252 - 4 * (g - 159), 0]],
  [224, 256, g => [252 - 4 * (g - 223), 0, 0]]
];

function jet(x) {
  const g = parseInt(x * 256);
  for (let i = 0; i < colors.length; i++) {
    const [min, max, func] = colors[i];
    if (g >= min && g < max) {
      return func(g).map(v => v / 256);
    }
  }
  return [0, 0, 0]; // 处理超出范围的情况
}
export {
  getColor,
  rainbowColors,
  jet,
  getRainbowColor
};
