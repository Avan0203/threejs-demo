var version=function(e,t){"use strict";function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var s=i(t);class r extends t.Group{constructor(e={x:"red",y:"green",z:"blue"},i=10,s=1,r=.5*s){super(),this.colors=e,this.axesLength=i,this.arrowsLength=s,this.arrowsWidth=r,this.type="CoordinateHelper";const o={x:[1,0,0],y:[0,1,0],z:[0,0,1]},a=new t.Vector3;["x","y","z"].forEach((n=>{const l=new t.ArrowHelper(new t.Vector3(...o[n]),a,i,e[n],s,r);l.renderOrder=1/0,this.add(l)}))}setLength(e=10,t=1,i=.5*t){this.traverse((s=>{s.setLength(e,t,i)}))}dispose(){this.traverse((e=>{e.dispose()}))}}class o extends t.LineSegments{constructor(e=10,i=10,s=1,r=1,o=11184810,a=14671839,n=15658734){super(new t.BufferGeometry,new t.LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="CustomGridHelper",this.centerColor=new t.Color(o),this.baseColor=new t.Color(a),this.divsionColor=new t.Color(n),this.width=e,this.height=i,this.divsion=s,this.splice=r,this.update()}update(){let e;e=1===this.splice?1:1/this.splice;const{centerColor:i,baseColor:s,divsionColor:r,width:o,height:a,splice:n,divsion:l}=this,[p,c]=[o/l*n,a/l*n],h=[],d=[];let u,m,w,y=0;function f(e,t,o,a,l){const p={x:(e,t)=>h.push(-t,e,0,t,e,0),y:(e,t)=>h.push(e,-t,0,e,t,0)};for(let c=0,h=-e;c<=o;c++,h+=a)p[l](h,e),m=c%n==0,w=c===t,u=r,w?u=i:m&&!w&&(u=s),u.toArray(d,y),y+=3,u.toArray(d,y),y+=3}f(o/2,p/2,p,e,"x"),f(a/2,c/2,c,e,"y"),this.geometry.setAttribute("position",new t.Float32BufferAttribute(h,3)),this.geometry.setAttribute("color",new t.Float32BufferAttribute(d,3)),this.geometry.attributes.position.needUpdate=!0,this.geometry.attributes.color.needUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}const a=new s.Vector4;class n extends s.Object3D{constructor(e,t){super(),this.isViewHelper=!0,this.editorCamera=e,this.animating=!1,this.controls=null;const i=new s.Color("#ff3653"),r=new s.Color("#8adb00"),o=new s.Color("#2c8fff"),n=[],l=new s.Raycaster,p=new s.Vector2,c=new s.Object3D,h=new s.OrthographicCamera(-2,2,2,-2,0,4);h.position.set(0,0,2);const d=new s.BoxGeometry(.8,.05,.05).translate(.4,0,0),u=new s.Mesh(d,O(i)),m=new s.Mesh(d,O(r)),w=new s.Mesh(d,O(o));m.rotation.z=Math.PI/2,w.rotation.y=-Math.PI/2,this.add(u),this.add(w),this.add(m);const y=new s.Sprite(k(i,"X"));y.userData.type="posX";const f=new s.Sprite(k(r,"Y"));f.userData.type="posY";const g=new s.Sprite(k(o,"Z"));g.userData.type="posZ";const C=new s.Sprite(k(i));C.userData.type="negX";const b=new s.Sprite(k(r));b.userData.type="negY";const x=new s.Sprite(k(o));x.userData.type="negZ",y.position.x=1,f.position.y=1,g.position.z=1,C.position.x=-1,C.scale.setScalar(.8),b.position.y=-1,b.scale.setScalar(.8),x.position.z=-1,x.scale.setScalar(.8),this.add(y),this.add(f),this.add(g),this.add(C),this.add(b),this.add(x),n.push(y),n.push(f),n.push(g),n.push(C),n.push(b),n.push(x);const M=new s.Vector3,E=128,v=2*Math.PI;this.render=function(e){this.quaternion.copy(this.editorCamera.quaternion).invert(),this.updateMatrixWorld(),M.set(0,0,1),M.applyQuaternion(this.editorCamera.quaternion),M.x>=0?(y.material.opacity=1,C.material.opacity=.5):(y.material.opacity=.5,C.material.opacity=1),M.y>=0?(f.material.opacity=1,b.material.opacity=.5):(f.material.opacity=.5,b.material.opacity=1),M.z>=0?(g.material.opacity=1,x.material.opacity=.5):(g.material.opacity=.5,x.material.opacity=1);const i=t.offsetWidth-E;e.clearDepth(),e.getViewport(a),e.setViewport(i,0,E,E),e.render(this,h),e.setViewport(a.x,a.y,a.z,a.w)};const S=new s.Vector3,P=new s.Quaternion,V=new s.Quaternion,A=new s.Quaternion;let D=0;function O(e){return new s.MeshBasicMaterial({color:e,toneMapped:!1})}function k(e,t=null){const i=document.createElement("canvas");i.width=64,i.height=64;const r=i.getContext("2d");r.beginPath(),r.arc(32,32,16,0,2*Math.PI),r.closePath(),r.fillStyle=e.getStyle(),r.fill(),null!==t&&(r.font="24px Arial",r.textAlign="center",r.fillStyle="#000000",r.fillText(t,32,41));const o=new s.CanvasTexture(i);return new s.SpriteMaterial({map:o,toneMapped:!1})}this.handleClick=function(e){if(!0===this.animating)return!1;const i=t.getBoundingClientRect(),r=i.left+(t.offsetWidth-E),o=i.top+(t.offsetHeight-E);p.x=(e.clientX-r)/(i.width-r)*2-1,p.y=-(e.clientY-o)/(i.bottom-o)*2+1,l.setFromCamera(p,h);const a=l.intersectObjects(n);if(a.length>0){return function(e,t){switch(e.userData.type){case"posX":S.set(1,0,0),P.setFromEuler(new s.Euler(0,.5*Math.PI,0));break;case"posY":S.set(0,1,0),P.setFromEuler(new s.Euler(.5*-Math.PI,0,0));break;case"posZ":S.set(0,0,1),P.setFromEuler(new s.Euler);break;case"negX":S.set(-1,0,0),P.setFromEuler(new s.Euler(0,.5*-Math.PI,0));break;case"negY":S.set(0,-1,0),P.setFromEuler(new s.Euler(.5*Math.PI,0,0));break;case"negZ":S.set(0,0,-1),P.setFromEuler(new s.Euler(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}D=this.editorCamera.position.distanceTo(t),S.multiplyScalar(D).add(t),c.position.copy(t),c.lookAt(this.editorCamera.position),V.copy(c.quaternion),c.lookAt(S),A.copy(c.quaternion)}(a[0].object,this.controls.center),this.animating=!0,!0}return!1},this.update=function(e){const t=e*v,i=this.controls.center;V.rotateTowards(A,t),this.editorCamera.position.set(0,0,1).applyQuaternion(V).multiplyScalar(D).add(i),this.editorCamera.quaternion.rotateTowards(P,t),0===V.angleTo(A)&&(this.animating=!1)},this.dispose=function(){d.dispose(),u.material.dispose(),m.material.dispose(),w.material.dispose(),y.material.map.dispose(),f.material.map.dispose(),g.material.map.dispose(),C.material.map.dispose(),b.material.map.dispose(),x.material.map.dispose(),y.material.dispose(),f.material.dispose(),g.material.dispose(),C.material.dispose(),b.material.dispose(),x.material.dispose()}}}return e.CoordinateHelper=r,e.CustomGridHelper=o,e.ViewHelper=n,e}({},THREE);
